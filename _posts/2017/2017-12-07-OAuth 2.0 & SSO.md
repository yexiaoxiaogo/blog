---
layout: post
title: "开放授权和单点登录"
date: 2017-12-07
tags: [单点登录]
commentIssueId: 16
---

# OAuth 2.0 开放授权

允许用户提供一个令牌，而不是用户名和密码来访问第三方。

处理流程：
1. 得到授权码code
2. 获取access token
3. 通过access token 获取OpenID
4. 通过access token 和OpenID调用API，获取用户授权信息

问题：静默授权，直接授权给自己信任的子系统。

# SSO 单点登录

我们要实现一次登录一次退出，只需要想办法让各个server的共用一个session的信息，让客户端在各个域名下都能持有这个ID就好了。再进一步讲，只要各个server拿到同一个ID，都能有办法检验出ID的有效性、并且能得到ID对应的用户信息就行了，也就是能检验ID。

实现机制：当用户第一次访问应用系统的时候，因为还没有登录，会被引导到认证系统中进行登录；根据用户提供的登录信息，认证系统进行身份校验，如果通过校验，应该返回给用户一个认证的凭据－－ticket；用户再访问别的应用的时候，就会将这个ticket带上，作为自己认证的凭据，应用系统接受到请求之后会把ticket送到认证系统进行校验，检查ticket的合法性。如果通过校验，用户就可以在不用再次登录的情况下访问应用系统2和应用系统3了。
